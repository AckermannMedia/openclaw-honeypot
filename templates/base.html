<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenClaw</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ¦ž</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #12141a; --bg-accent: #14161d; --bg-elevated: #1a1d25; --bg-hover: #262a35;
            --card: #181b22; --card-highlight: rgba(255,255,255,0.05);
            --text: #e4e4e7; --text-strong: #fafafa;
            --muted: #71717a; --muted-strong: #52525b;
            --border: #27272a; --border-strong: #3f3f46; --input: #27272a; --ring: #ff5c5c;
            --accent: #ff5c5c; --accent-hover: #ff7070; --accent-subtle: rgba(255,92,92,0.15); --accent-glow: rgba(255,92,92,0.25);
            --ok: #22c55e; --ok-subtle: rgba(34,197,94,0.12);
            --warn: #f59e0b; --warn-subtle: rgba(245,158,11,0.12);
            --danger: #ef4444; --danger-subtle: rgba(239,68,68,0.12);
            --info: #3b82f6;
            --mono: 'JetBrains Mono', ui-monospace, monospace;
            --font-body: 'Space Grotesk', -apple-system, sans-serif;
            --radius-sm: 6px; --radius-md: 8px; --radius-lg: 12px; --radius-full: 9999px;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.2);
            --ease-out: cubic-bezier(0.16,1,0.3,1);
            --shell-nav-width: 220px; --shell-topbar-height: 56px;
            color-scheme: dark;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; }
        body { background: var(--bg); font: 400 14px/1.55 var(--font-body); letter-spacing: -0.02em; color: var(--text); -webkit-font-smoothing: antialiased; overflow: hidden; }
        a { color: var(--accent); text-decoration: none; }
        ::selection { background: var(--accent-subtle); color: var(--text-strong); }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: var(--radius-full); }
        @keyframes rise { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes dashboard-enter { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }
        .shell { height: 100vh; display: grid; grid-template-columns: var(--shell-nav-width) minmax(0,1fr); grid-template-rows: var(--shell-topbar-height) 1fr; grid-template-areas: "topbar topbar" "nav content"; animation: dashboard-enter 0.4s var(--ease-out); overflow: hidden; }
        .topbar { grid-area: topbar; z-index: 40; display: flex; justify-content: space-between; align-items: center; gap: 16px; padding: 0 20px; height: var(--shell-topbar-height); border-bottom: 1px solid var(--border); background: var(--bg); }
        .topbar-left { display: flex; align-items: center; gap: 24px; }
        .logo { display: flex; align-items: center; gap: 10px; font-size: 16px; font-weight: 700; color: var(--text-strong); }
        .logo-icon { font-size: 24px; }
        .logo-text span { color: var(--accent); }
        .topbar-tabs { display: flex; gap: 4px; }
        .topbar-tab { padding: 8px 14px; color: var(--muted); font-size: 13px; font-weight: 500; border-radius: var(--radius-md); cursor: pointer; transition: all 0.12s; border: none; background: transparent; text-decoration: none; }
        .topbar-tab:hover { color: var(--text); background: var(--bg-hover); }
        .topbar-tab.active { color: var(--text-strong); background: var(--accent-subtle); }
        .topbar-right { display: flex; align-items: center; gap: 12px; }
        .status-chip { display: flex; align-items: center; gap: 6px; padding: 6px 12px; border-radius: var(--radius-full); font-size: 12px; font-weight: 500; background: var(--ok-subtle); color: var(--ok); }
        .status-dot { width: 8px; height: 8px; background: var(--ok); border-radius: 50%; box-shadow: 0 0 8px rgba(34,197,94,0.5); }
        .theme-btn { width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; background: transparent; border: 1px solid var(--border); border-radius: var(--radius-md); color: var(--muted); cursor: pointer; }
        .theme-btn:hover { background: var(--bg-hover); color: var(--text); }
        .theme-btn svg { width: 16px; height: 16px; stroke: currentColor; fill: none; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }
        .nav { grid-area: nav; overflow-y: auto; padding: 16px 12px; background: var(--bg); border-right: 1px solid var(--border); scrollbar-width: none; }
        .nav::-webkit-scrollbar { display: none; }
        .nav-group { margin-bottom: 20px; display: grid; gap: 2px; }
        .nav-group__label { font-size: 11px; font-weight: 600; color: var(--muted-strong); text-transform: uppercase; letter-spacing: 0.08em; padding: 8px 10px 6px; }
        .nav-item { display: flex; align-items: center; gap: 10px; padding: 8px 10px; border-radius: var(--radius-md); border: 1px solid transparent; color: var(--muted); font-size: 13px; font-weight: 500; cursor: pointer; transition: all 0.12s; background: transparent; width: 100%; text-align: left; text-decoration: none; }
        .nav-item:hover { background: var(--bg-hover); color: var(--text); }
        .nav-item.active { color: var(--text-strong); background: var(--accent-subtle); }
        .nav-item.active .nav-item__icon { color: var(--accent); }
        .nav-item__icon { width: 16px; height: 16px; opacity: 0.6; }
        .nav-item__icon svg { width: 100%; height: 100%; stroke: currentColor; fill: none; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }
        .content { grid-area: content; padding: 12px 16px 32px; min-height: 0; overflow-y: auto; }
        .content > * + * { margin-top: 18px; }
        .grid { display: grid; gap: 20px; }
        .grid-cols-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
        .grid-cols-3 { grid-template-columns: repeat(3, minmax(0,1fr)); }
        .card { border: 1px solid var(--border); background: var(--card); border-radius: var(--radius-lg); padding: 20px; animation: rise 0.35s var(--ease-out) backwards; box-shadow: var(--shadow-sm), inset 0 1px 0 var(--card-highlight); }
        .card:hover { border-color: var(--border-strong); }
        .card-title { font-size: 15px; font-weight: 600; color: var(--text-strong); letter-spacing: -0.02em; }
        .card-sub { color: var(--muted); font-size: 13px; margin-top: 4px; }
        .row { display: flex; gap: 12px; align-items: center; }
        .row.space-between { justify-content: space-between; }
        .filters { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; margin-top: 14px; }
        .field { display: grid; gap: 6px; }
        .field span { color: var(--muted); font-size: 13px; font-weight: 500; }
        .field input, .field select, .field textarea { border: 1px solid var(--input); background: var(--card); border-radius: var(--radius-md); padding: 8px 12px; outline: none; font: inherit; color: var(--text); box-shadow: inset 0 1px 0 var(--card-highlight); }
        .field input:focus, .field select:focus, .field textarea:focus { border-color: var(--ring); box-shadow: 0 0 0 2px var(--bg), 0 0 0 4px var(--ring); }
        .field.checkbox { flex-direction: row; align-items: center; gap: 8px; }
        .field.checkbox input { width: 16px; height: 16px; }
        .btn { display: inline-flex; align-items: center; gap: 8px; border: 1px solid var(--border); background: var(--bg-elevated); padding: 9px 16px; border-radius: var(--radius-md); font-size: 13px; font-weight: 500; color: var(--text); cursor: pointer; transition: all 0.12s; }
        .btn:hover { background: var(--bg-hover); border-color: var(--border-strong); transform: translateY(-1px); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .btn.primary { border-color: var(--accent); background: var(--accent); color: #fff; }
        .btn.primary:hover { background: var(--accent-hover); }
        .btn.danger { background: var(--danger-subtle); color: var(--danger); border-color: transparent; }
        .btn--sm { padding: 6px 10px; font-size: 12px; }
        .stat-grid { display: grid; gap: 12px; grid-template-columns: repeat(auto-fit, minmax(120px,1fr)); }
        .stat { background: var(--card); border-radius: var(--radius-md); padding: 14px 16px; border: 1px solid var(--border); }
        .stat-label { color: var(--muted); font-size: 11px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.06em; }
        .stat-value { font-size: 24px; font-weight: 700; color: var(--text-strong); letter-spacing: -0.03em; margin-top: 4px; }
        .stat-value.ok { color: var(--ok); }
        .stat-value.warn { color: var(--warn); }
        .stat-value.danger { color: var(--danger); }
        .list { display: grid; gap: 8px; margin-top: 16px; }
        .list-item { display: grid; grid-template-columns: minmax(0,1fr) minmax(180px,240px); border: 1px solid var(--border); padding: 12px 14px; background: var(--card); border-radius: var(--radius-md); gap: 16px; }
        .list-item:hover { border-color: var(--border-strong); }
        .list-item-selected { border-color: var(--accent); box-shadow: 0 0 0 2px var(--bg), 0 0 0 4px var(--ring); }
        .list-main { display: flex; flex-direction: column; gap: 4px; }
        .list-title { font-size: 14px; font-weight: 600; color: var(--text-strong); }
        .list-sub { font-size: 12px; color: var(--muted); }
        .list-meta { display: flex; flex-direction: column; align-items: flex-end; gap: 4px; font-size: 12px; }
        .chip { display: inline-flex; align-items: center; font-size: 11px; font-weight: 500; padding: 4px 8px; border-radius: var(--radius-full); background: var(--bg-elevated); border: 1px solid var(--border); }
        .chip-ok { color: var(--ok); background: var(--ok-subtle); border-color: transparent; }
        .chip-warn { color: var(--warn); background: var(--warn-subtle); border-color: transparent; }
        .chip-danger { color: var(--danger); background: var(--danger-subtle); border-color: transparent; }
        .chip-row { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 8px; }
        .callout { padding: 14px 16px; border-radius: var(--radius-md); font-size: 13px; background: var(--bg-elevated); border: 1px solid var(--border); color: var(--muted); }
        .callout.danger { border-color: rgba(239,68,68,0.25); color: var(--danger); background: var(--danger-subtle); }
        .callout.warn { border-color: rgba(245,158,11,0.25); color: var(--warn); background: var(--warn-subtle); }
        .muted { color: var(--muted); font-size: 12px; }
        .mono { font-family: var(--mono); }
        .table { display: grid; gap: 6px; margin-top: 16px; }
        .table-head { display: grid; grid-template-columns: 1.4fr 1fr 0.8fr 0.8fr 0.8fr 0.6fr; gap: 12px; padding: 8px 12px; font-size: 11px; font-weight: 600; color: var(--muted); text-transform: uppercase; letter-spacing: 0.05em; }
        .table-row { display: grid; grid-template-columns: 1.4fr 1fr 0.8fr 0.8fr 0.8fr 0.6fr; gap: 12px; border: 1px solid var(--border); padding: 10px 12px; background: var(--card); border-radius: var(--radius-md); font-size: 13px; align-items: center; }
        .table-row:hover { border-color: var(--border-strong); }
        .code-block { background: #0d0d0d; border: 1px solid #333; border-radius: var(--radius-md); padding: 14px 16px; font-family: var(--mono); font-size: 12px; color: #e0e0e0; overflow-x: auto; white-space: pre; margin-top: 12px; }
        .log-stream { display: grid; gap: 2px; margin-top: 16px; max-height: 400px; overflow-y: auto; font-family: var(--mono); font-size: 12px; }
        .log-row { display: grid; grid-template-columns: 90px 60px 100px 1fr; gap: 12px; padding: 6px 10px; background: var(--bg-elevated); border-radius: var(--radius-sm); }
        .log-time { color: var(--muted); }
        .log-level { font-weight: 600; text-transform: uppercase; }
        .log-level.info { color: var(--info); }
        .log-level.warn { color: var(--warn); }
        .log-level.error { color: var(--danger); }
        .log-level.debug { color: var(--muted); }
        .log-subsystem { color: var(--accent); }
        .log-message { color: var(--text); }
        .status-list { display: grid; gap: 8px; margin-top: 16px; }
        .status-list > div { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--border); font-size: 13px; }
        .status-list .label { color: var(--muted); }
        .account-card { border: 1px solid var(--border); border-radius: var(--radius-md); padding: 14px; margin-top: 12px; background: var(--bg-elevated); }
        .account-card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .account-card-title { font-weight: 600; color: var(--text-strong); }
        .account-card-id { font-family: var(--mono); font-size: 11px; color: var(--muted); }
        @media (max-width: 1100px) {
            .shell { grid-template-columns: 1fr; grid-template-rows: auto auto 1fr; grid-template-areas: "topbar" "nav" "content"; }
            .nav { display: flex; gap: 6px; overflow-x: auto; border-right: none; border-bottom: 1px solid var(--border); padding: 10px 14px; }
            .nav-group { margin-bottom: 0; flex-direction: row; gap: 4px; }
            .nav-group__label { display: none; }
            .grid-cols-2, .grid-cols-3 { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="shell">
        <header class="topbar">
            <div class="topbar-left">
                <div class="logo">
                    <span class="logo-icon">ðŸ¦ž</span>
                    <span class="logo-text">Open<span>Claw</span></span>
                </div>
                <nav class="topbar-tabs">
                    <a href="/dashboard/chat" class="topbar-tab {% if active_tab == 'chat' %}active{% endif %}" onclick="logNav('chat')">Chat</a>
                    <a href="/dashboard/" class="topbar-tab {% if active_tab == 'overview' %}active{% endif %}" onclick="logNav('overview')">Overview</a>
                    <a href="/dashboard/sessions" class="topbar-tab {% if active_tab == 'sessions' %}active{% endif %}" onclick="logNav('sessions')">Sessions</a>
                    <a href="/dashboard/channels" class="topbar-tab {% if active_tab == 'channels' %}active{% endif %}" onclick="logNav('channels')">Channels</a>
                    <a href="/dashboard/skills" class="topbar-tab {% if active_tab == 'skills' %}active{% endif %}" onclick="logNav('skills')">Skills</a>
                    <a href="/dashboard/usage" class="topbar-tab {% if active_tab == 'usage' %}active{% endif %}" onclick="logNav('usage')">Usage</a>
                </nav>
            </div>
            <div class="topbar-right">
                <div class="status-chip"><span class="status-dot"></span>Connected</div>
                <button class="theme-btn" onclick="logAction('theme')"><svg viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg></button>
            </div>
        </header>
        <aside class="nav">
            <div class="nav-group">
                <div class="nav-group__label">Chat</div>
                <a href="/dashboard/chat" class="nav-item {% if active_tab == 'chat' %}active{% endif %}"><span class="nav-item__icon"><svg viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></span>Chat</a>
            </div>
            <div class="nav-group">
                <div class="nav-group__label">Gateway</div>
                <a href="/dashboard/" class="nav-item {% if active_tab == 'overview' %}active{% endif %}"><span class="nav-item__icon"><svg viewBox="0 0 24 24"><line x1="12" x2="12" y1="20" y2="10"/><line x1="18" x2="18" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="16"/></svg></span>Overview</a>
                <a href="/dashboard/instances" class="nav-item {% if active_tab == 'instances' %}active{% endif %}"><span class="nav-item__icon"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="2"/><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"/></svg></span>Instances</a>
                <a href="/dashboard/sessions" class="nav-item {% if active_tab == 'sessions' %}active{% endif %}"><span class="nav-item__icon"><svg viewBox="0 0 24 24"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/></svg></span>Sessions</a>
                <a href="/dashboard/nodes" class="nav-item {% if active_tab == 'nodes' %}active{% endif %}"><span class="nav-item__icon"><svg viewBox="0 0 24 24"><rect width="20" height="14" x="2" y="3" rx="2"/><line x1="8" x2="16" y1="21" y2="21"/><line x1="12" x2="12" y1="17" y2="21"/></svg></span>Nodes</a>
            </div>
            <div class="nav-group">
                <div class="nav-group__label">Configuration</div>
                <a href="/dashboard/channels" class="nav-item {% if active_tab == 'channels' %}active{% endif %}"><span class="nav-item__icon"><svg viewBox="0 0 24 24"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg></span>Channels</a>
                <a href="/dashboard/skills" class="nav-item {% if active_tab == 'skills' %}active{% endif %}"><span class="nav-item__icon"><svg viewBox="0 0 24 24"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></span>Skills</a>
                <a href="/dashboard/cron" class="nav-item {% if active_tab == 'cron' %}active{% endif %}"><span class="nav-item__icon"><svg viewBox="0 0 24 24"><line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/></svg></span>Cron</a>
            </div>
            <div class="nav-group">
                <div class="nav-group__label">Account</div>
                <a href="/dashboard/usage" class="nav-item {% if active_tab == 'usage' %}active{% endif %}"><span class="nav-item__icon"><svg viewBox="0 0 24 24"><line x1="12" x2="12" y1="20" y2="10"/><line x1="18" x2="18" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="16"/></svg></span>Usage</a>
                <a href="/dashboard/config" class="nav-item {% if active_tab == 'config' %}active{% endif %}"><span class="nav-item__icon"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg></span>Config</a>
                <a href="/dashboard/logs" class="nav-item {% if active_tab == 'logs' %}active{% endif %}"><span class="nav-item__icon"><svg viewBox="0 0 24 24"><path d="M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4"/><path d="M19 17V5a2 2 0 0 0-2-2H4"/><path d="M15 8h-5"/><path d="M15 12h-5"/></svg></span>Logs</a>
            </div>
        </aside>
        <main class="content">
            {% block content %}{% endblock %}
        </main>
    </div>
    <script>
        function logNav(page) { fetch('/api/nav?page=' + page).catch(() => {}); }
        function logAction(action) { fetch('/api/action?type=' + action).catch(() => {}); }
        document.querySelectorAll('.nav-item, .topbar-tab').forEach(el => {
            el.addEventListener('click', () => fetch('/api/click').catch(() => {}));
        });
        document.querySelectorAll('input, select, textarea').forEach(el => {
            el.addEventListener('focus', () => fetch('/api/focus?field=' + encodeURIComponent(el.name || el.previousElementSibling?.textContent || '')).catch(() => {}));
        });
        document.querySelectorAll('.btn').forEach(el => {
            el.addEventListener('click', () => fetch('/api/action?type=button_' + encodeURIComponent(el.textContent.trim())).catch(() => {}));
        });
    </script>
</body>
</html>
